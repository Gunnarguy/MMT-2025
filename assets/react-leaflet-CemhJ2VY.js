import{r as l,R as g}from"./react-TFhZ49XI.js";import{u as O,c as E,L as x,a as R,b as d,e as L,d as T,f as h,g as z,h as S,w as j}from"./vendor-DXeJoHR3.js";import{l as r}from"./leaflet-DtPDPQxn.js";import"./react-dom-DsMqZ5-k.js";function Z(){return O().map}function B({bounds:o,boundsOptions:n,center:e,children:t,className:a,id:y,placeholder:i,style:p,whenReady:s,zoom:u,...P},b){const[w]=l.useState({className:a,id:y,style:p}),[f,M]=l.useState(null),m=l.useRef(void 0);l.useImperativeHandle(b,()=>f?.map??null,[f]);const v=l.useCallback(C=>{if(C!==null&&!m.current){const c=new r.Map(C,P);m.current=c,e!=null&&u!=null?c.setView(e,u):o!=null&&c.fitBounds(o,n),s!=null&&c.whenReady(s),M(E(c))}},[]);l.useEffect(()=>()=>{f?.map.remove()},[f]);const I=f?g.createElement(x,{value:f},t):i??null;return g.createElement("div",{...w,ref:v},I)}const k=l.forwardRef(B),q=R(function({position:n,...e},t){const a=new r.Marker(n,e);return d(a,L(t,{overlayContainer:a}))},function(n,e,t){e.position!==t.position&&n.setLatLng(e.position),e.icon!=null&&e.icon!==t.icon&&n.setIcon(e.icon),e.zIndexOffset!=null&&e.zIndexOffset!==t.zIndexOffset&&n.setZIndexOffset(e.zIndexOffset),e.opacity!=null&&e.opacity!==t.opacity&&n.setOpacity(e.opacity),n.dragging!=null&&e.draggable!==t.draggable&&(e.draggable===!0?n.dragging.enable():n.dragging.disable())}),A=T(function({positions:n,...e},t){const a=new r.Polyline(n,e);return d(a,L(t,{overlayContainer:a}))},function(n,e,t){e.positions!==t.positions&&n.setLatLngs(e.positions)}),D=h(function(n,e){const t=new r.Popup(n,e.overlayContainer);return d(t,e)},function(n,e,{position:t},a){l.useEffect(function(){const{instance:i}=n;function p(u){u.popup===i&&(i.update(),a(!0))}function s(u){u.popup===i&&a(!1)}return e.map.on({popupopen:p,popupclose:s}),e.overlayContainer==null?(t!=null&&i.setLatLng(t),i.openOn(e.map)):e.overlayContainer.bindPopup(i),function(){e.map.off({popupopen:p,popupclose:s}),e.overlayContainer?.unbindPopup(),e.map.removeLayer(i)}},[n,e,a,t])}),F=z(function({url:n,...e},t){const a=new r.TileLayer(n,j(e,t));return d(a,t)},function(n,e,t){S(n,e,t);const{url:a}=e;a!=null&&a!==t.url&&n.setUrl(a)});export{k as M,A as P,F as T,q as a,D as b,Z as u};
